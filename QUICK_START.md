# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—É—Ä—Å–æ–≤

## üìã –ß—Ç–æ —É–º–µ–µ—Ç —Å–∏—Å—Ç–µ–º–∞

‚úÖ **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ** —Å Kinescope –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö (360p, 720p, 1080p)  
‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ** –∏–∑ –≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤  
‚úÖ **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è** –∞—É–¥–∏–æ —Å –ø–æ–º–æ—â—å—é OpenAI Whisper  
‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π** —É—Ä–æ–∫–æ–≤ —Å –ø–æ–º–æ—â—å—é GPT-4o-mini  
‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ–¥ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –∞–Ω–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞  

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg:**
   ```bash
   brew install ffmpeg
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á–∏ –≤ `config.php`:**
   ```php
   return [
       'apis' => [
           'kinescope' => [
               'api_key' => 'YOUR_KINESCOPE_API_KEY'
           ],
           'openai' => [
               'api_key' => 'YOUR_OPENAI_API_KEY'
           ]
       ]
   ];
   ```

3. **–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   mkdir -p store
   chmod 755 store
   ```

## üé¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ

```bash
php process_video.php --url=https://kinescope.io/202339654 --lesson=1 --course="–ú–∞—Å—Å–∞–∂ –®–í–ó" --quality=360p
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–∫–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ 360p
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∞—É–¥–∏–æ
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç —Å –ø–æ–º–æ—â—å—é Whisper
- –°–æ–∑–¥–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `store/–ú–∞—Å—Å–∞–∂ –®–í–ó/`

## üìö –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫—É—Ä—Å–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ JSON —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º –≤–∏–¥–µ–æ:**
   ```json
   [
     {
       "url": "https://kinescope.io/202271407",
       "lesson": 1,
       "title": "–í–≤–µ–¥–µ–Ω–∏–µ"
     },
     {
       "url": "https://kinescope.io/5NRs6UHWgMX9RtHqxNGy8j",
       "lesson": 2,
       "title": "–¢–µ–æ—Ä–∏—è. –ú—ã—à—Ü—ã"
     }
   ]
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É:**
   ```bash
   php process_course.php --course="–ú–∞—Å—Å–∞–∂ –®–í–ó" --videos=example_videos.json --quality=360p
   ```

## üë§ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∫—É—Ä—Å–∞

```bash
php personalize_course.php --user=user_1234567890_abc12344 --course="–ú–∞—Å—Å–∞–∂ –®–í–ó"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤
- –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `store/–ú–∞—Å—Å–∞–∂ –®–í–ó/personalize/user_1234567890_abc12344/`

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   ./start_server.sh
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - **–ê–Ω–∫–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** `http://localhost:8000/process_survey.php?uid=user_123&course=–ú–∞—Å—Å–∞–∂%20–®–í–ó`
   - **–ü—Ä–æ—Å–º–æ—Ç—Ä —É—Ä–æ–∫–∞:** `http://localhost:8000/view_lesson.php?uid=user_123&lesson=1&course=–ú–∞—Å—Å–∞–∂%20–®–í–ó`
   - **–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ:** `http://localhost:8000/view_homework.php?uid=user_123&lesson=1&course=–ú–∞—Å—Å–∞–∂%20–®–í–ó`
   - **–í–µ—Å—å –∫—É—Ä—Å:** `http://localhost:8000/view_personalized_course.php?uid=user_123&course=–ú–∞—Å—Å–∞–∂%20–®–í–ó`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—á–µ—Ä–µ–¥–∏
php -r "require 'queue_system.php'; print_r(getProcessingQueue());"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
php -r "require 'queue_system.php'; print_r(getQueueStats());"
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `php process_video.php --url=URL --lesson=N --course="NAME"` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ |
| `php process_course.php --course="NAME" --videos=FILE` | –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| `php personalize_course.php --user=ID --course="NAME"` | –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è |
| `./start_server.sh` | –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ |
| `php demo.php` | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
store/
‚îú‚îÄ‚îÄ {course_name}/                    # –ü–∞–ø–∫–∞ –∫—É—Ä—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ {lesson}-{video_id}.txt       # –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ {lesson}-{video_id}-final.json # –û–ø–∏—Å–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ personalize/                  # –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ {user_id}/                # –ü–∞–ø–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ           ‚îî‚îÄ‚îÄ {lesson}-{video_id}-{user_id}.json
‚îú‚îÄ‚îÄ processing_queue.json             # –û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ processing_status.json           # –°—Ç–∞—Ç—É—Å—ã —É—Ä–æ–∫–æ–≤
‚îî‚îÄ‚îÄ user_profiles.json              # –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–û—à–∏–±–∫–∞ "API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `config.php`
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–µ–π

**–û—à–∏–±–∫–∞ "FFmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω":**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg: `brew install ffmpeg`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PATH: `which ffmpeg`

**–û—à–∏–±–∫–∞ "–ü–∞–ø–∫–∞ store –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞":**
- –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É: `mkdir -p store`
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞: `chmod 755 store`

**–û—à–∏–±–∫–∞ "–í–∏–¥–µ–æ –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á Kinescope
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ URL –≤–∏–¥–µ–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—É—Ä—Å–∞ "–ú–∞—Å—Å–∞–∂ –®–í–ó"

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª videos.json
echo '[
  {
    "url": "https://kinescope.io/202271407",
    "lesson": 1,
    "title": "–í–≤–µ–¥–µ–Ω–∏–µ"
  },
  {
    "url": "https://kinescope.io/5NRs6UHWgMX9RtHqxNGy8j",
    "lesson": 2,
    "title": "–¢–µ–æ—Ä–∏—è. –ú—ã—à—Ü—ã"
  }
]' > videos.json

# –û–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –∫—É—Ä—Å
php process_course.php --course="–ú–∞—Å—Å–∞–∂ –®–í–ó" --videos=videos.json --quality=360p

# –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
php personalize_course.php --user=user_1234567890_abc12344 --course="–ú–∞—Å—Å–∞–∂ –®–í–ó"
```

### 2. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
./start_server.sh

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open "http://localhost:8000/process_survey.php?uid=user_123&course=–ú–∞—Å—Å–∞–∂%20–®–í–ó"
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫—É—Ä—Å** —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏  
‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç** –ø–æ–¥ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** –æ–±—Ä–∞–±–æ—Ç–∫–∏  

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `README.md`
- **–î–µ–º–æ:** `php demo.php`
- **–õ–æ–≥–∏:** `store/processing_*.json`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `config.php`

---

üéâ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

















