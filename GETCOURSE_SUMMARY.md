# üéØ GetCourse Integration - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. **–ê–Ω–∫–µ—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π**
- URL: `https://pesonalisev2-zxby.vercel.app/survey/iframe?uid={uid}&name={real_name}`
- –ò–º—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ GetCourse
- UID –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å

### 2. **API –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–ª–æ–∫–æ–≤ —É—Ä–æ–∫–æ–≤**
- Endpoint: `POST /api/persona/block`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç —É—Ä–æ–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É, –µ—Å–ª–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞

### 3. **–°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–æ–≤**
- URL: `https://pesonalisev2-zxby.vercel.app/persona/styles.css`
- –ö—Ä–∞—Å–∏–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞

---

## üìã –ö–æ–¥ –¥–ª—è GetCourse

### –ê–Ω–∫–µ—Ç–∞ (–≤—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–º —É—Ä–æ–∫–µ):

```html
<iframe 
  src="https://pesonalisev2-zxby.vercel.app/survey/iframe?uid={uid}&name={real_name}" 
  style="width:100%;max-width:900px;height:1200px;border:0;border-radius:12px;overflow:hidden;"
  allowtransparency="true">
</iframe>
```

### –ë–ª–æ–∫ —É—Ä–æ–∫–∞ (–≤—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–∫–µ):

```html
<div id="sell-block"
     data-lesson="–ß–ê–°–¢–¨_–ù–ê–ó–í–ê–ù–ò–Ø_–£–†–û–ö–ê"
     data-title="–ü–û–õ–ù–û–ï –ù–ê–ó–í–ê–ù–ò–ï –£–†–û–ö–ê"
     style="display:none"></div>

<script>
(async function(){
  const API = "https://pesonalisev2-zxby.vercel.app/api/persona";
  const UID = "{uid}";
  const userId = (/^\d{3,}$/.test(String(UID))) ? String(UID) : "guest";
  const mount = document.getElementById('sell-block');
  const lesson = mount.getAttribute('data-lesson');
  const title  = mount.getAttribute('data-title');

  const r = await fetch(`${API}/block`, {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ user_id: userId, lesson: lesson, title: title, flush: false })
  });
  
  const data = await r.json();
  
  if (data && data.ok && data.html){
    if (!document.querySelector('link[data-persona-styles]')) {
      const link = document.createElement('link');
      link.rel = 'stylesheet'; 
      link.href = 'https://pesonalisev2-zxby.vercel.app/persona/styles.css';
      link.setAttribute('data-persona-styles','1'); 
      document.head.appendChild(link);
    }
    mount.innerHTML = data.html; 
    mount.style.display='block';
  }
})();
</script>
```

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞:

1. **–°—Ç—É–¥–µ–Ω—Ç –ø–æ–∫—É–ø–∞–µ—Ç –∫—É—Ä—Å** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø
2. **–ü–µ—Ä–≤—ã–π —É—Ä–æ–∫ - –∞–Ω–∫–µ—Ç–∞**:
   - –ò–º—è —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ó–∞–ø–æ–ª–Ω—è–µ—Ç –º–æ—Ç–∏–≤–∞—Ü–∏—é, —Ü–µ–ª–∏, —Å—Ç—Ä–∞—Ö–∏
   - –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫—É—Ä—Å"
   - **AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –í–°–ï–• 12 —É—Ä–æ–∫–æ–≤** (~30 —Å–µ–∫—É–Ω–¥)
3. **–ö–∞–∂–¥—ã–π —É—Ä–æ–∫**:
   - –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: –ª–∏—á–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ, —Å–æ–≤–µ—Ç—ã —Å —É—á–µ—Ç–æ–º –∞–Ω–∫–µ—Ç—ã, –º–æ—Ç–∏–≤–∞—Ü–∏—é

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–∫–æ–≤:

### –£—Ä–æ–∫ 1:
```html
data-lesson="–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è"
data-title="1 –£—Ä–æ–∫ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è"
```

### –£—Ä–æ–∫ 2:
```html
data-lesson="–ø–æ—Å—Ç–∏–∑–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è"
data-title="–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ—Å—Ç–∏–∑–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è"
```

### –£—Ä–æ–∫ 3:
```html
data-lesson="—Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ"
data-title="–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Ç–æ—á–∫–∏"
```

### –£—Ä–æ–∫ 4:
```html
data-lesson="–º—ã—à—Ü—ã"
data-title="–®–í–ó –ú—ã—à—Ü—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å"
```

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- ‚úÖ `OPENAI_API_KEY` –≤ Vercel (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- ‚úÖ Supabase (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- ‚úÖ GetCourse –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `{uid}` –∏ `{real_name}`

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

–°–º. —Ñ–∞–π–ª **GETCOURSE_SETUP.md** –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ production.



